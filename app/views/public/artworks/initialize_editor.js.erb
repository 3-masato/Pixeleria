$("#editor-container").html(`
<pixeleria-editor
  id="pixeleria-editor"
  artwidth="<%= @width %>"
  artheight="<%= @height %>"
  dotsize="<%= @dotsize %>"
></pixeleria-editor>`);
$("#pixeleria-editor").on("save", function(e) {
  const detail = e.detail;
  const url = "/artworks";
  // IDがあれば更新、なければ新規作成
  const method = detail.id ? "PUT" : "POST";

  $.ajax({
    url: url,
    type: method,
    contentType: "application/json",
    data: JSON.stringify({ artwork: detail, width: <%= @width %>, height: <%= @height %> }),
    success: function(response) {
      // 成功した場合の処理
      console.log('Artwork saved successfully', response);
    },
    error: function(xhr, status, error) {
      // エラー処理
      console.error('Error saving artwork', xhr, status, error);
    }
  });
});
