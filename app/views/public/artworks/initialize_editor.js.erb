$("#editor-container").html(`
<pixeleria-editor
  id="pixeleria-editor"
  artwidth="<%= @width %>"
  artheight="<%= @height %>"
  dotsize="<%= @dotsize %>"
></pixeleria-editor>`);

$("#pixeleria-editor").on("save", function(e) {
  const detail = e.detail;
  const url = "/artworks";

  $.ajax({
    url: url,
    type: "POST",
    contentType: "application/json",
    data: JSON.stringify({
      image_data: detail.imageData,
      pixel_data: detail.pixelData.join(","),
      width: <%= @width %>,
      height: <%= @height %>,
    })
  });
});
